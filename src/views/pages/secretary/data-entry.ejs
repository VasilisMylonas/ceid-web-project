<h2 class="mb-4">Εισαγωγή Δεδομένων</h2>
<div class="card shadow-sm">
  <div class="card-body">
    <h5 class="card-title">Εισαγωγή Δεδομένων Χρηστών</h5>
    <p class="card-text text-muted">Επιλέξτε ένα αρχείο JSON για να εισάγετε
      τα δεδομένα των φοιτητών και των διδασκόντων.</p>
    <form id="data-entry-form" class="needs-validation">
      <fieldset class="mb-4">
        <label for="data-file" class="form-label">Επιλογή Αρχείου JSON</label>
        <input class="form-control" type="file" id="data-file" accept=".json"
            required>
      </fieldset>

      <div id="result"></div>

      <button type="submit" class="btn btn-dark w-100">
        <i class="bi bi-upload me-2" aria-hidden="true"></i>
        Ανέβασμα Αρχείου
      </button>
    </form>
  </div>
</div>
<script>
  function handleDataEntrySubmit(e) {
    e.preventDefault();

    const dataFile = document.getElementById('data-file');
    const file = dataFile.files[0];

    const fileReader = new FileReader();
    fileReader.readAsText(file);

    fileReader.onload = async () => {
      try {
        showSpinner("result");
        await delay(250); // allow spinner to render
        await importUsers(JSON.parse(fileReader.result));
        showSuccessAlert("result", "Επιτυχής Εισαγωγή Δεδομένων",
          "Τα δεδομένα εισήχθησαν με επιτυχία.");
      } catch (error) {
        showErrorAlert("result", "Σφάλμα εισαγωγής δεδομένων",
          "Παρουσιάστηκε πρόβλημα κατά την εισαγωγή. Ελέγξτε το αρχείο JSON και προσπαθήστε ξανά.",
          error.message
        );
      }
    };

  }

  document.addEventListener('DOMContentLoaded', () => {
    const dataEntryForm = document.getElementById('data-entry-form');
    dataEntryForm.addEventListener("submit", handleDataEntrySubmit);
  })
</script>
